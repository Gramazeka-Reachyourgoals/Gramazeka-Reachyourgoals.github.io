function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),$(window).on("load",(function(){if(null!=localStorage.getItem("country")){var e=localStorage.getItem("country");c(e)}if(""!=localStorage.getItem("checkedNum")&&null!=localStorage.getItem("checkedNum"))var t=localStorage.getItem("checkedNum").split(",");else;function c(e){""!=e&&($.ajax("http://universities.hipolabs.com/search?country="+e,{success:function(c){if(null!=c&&null!=c&&0!=c.length){if($("#counter").remove(),null!=localStorage.getItem("checked")&&""!=localStorage.getItem("checked")?localStorage.getItem("countryOld")!=e?(localStorage.setItem("checked",""),t=localStorage.setItem("checkedNum",""),$("body").append('<div id="counter"><p id="count">0</p></div>')):$("body").append('<div id="counter"><p id="count">'+localStorage.getItem("checked")+"</p></div>"):$("body").append('<div id="counter"><p id="count">0</p></div>'),$(".table").remove(),dataLength=Object.keys(c[0]).length+1,$("body").append('<div class="table"><table border="1" cellspacing="0" cellpadding="10" cols='+dataLength+"></table></div>"),$("table").append("<tr></tr>"),null!=t)if(-1!=t.indexOf("1"))var a="checked";else a="";for(let e=0;e<dataLength;e++)switch(e){case 0:$("table>tr").append("<th>&nbsp;</th>"),$("table>tr").append("<th>"+Object.keys(c[0])[e]+"</th>");break;case dataLength-1:$("table>tr").append('<th>Save to my list<br><input type="checkbox" name="check" class="all" id="c1" '+a+"></th>");break;default:$("table>tr").append("<th>"+Object.keys(c[0])[e]+"</th>")}c.forEach((function(e,c){$("table").append("<tr></tr>");var a=c+2;if(null!=t)if(-1!=t.indexOf(String(a)))var o="checked";else o="";for(let t=0;t<dataLength;t++)switch(t){case 0:$("table>tr:nth-child("+a+")").append("<td>"+ ++c+"</td>"),$("table>tr:nth-child("+a+")").append('<td><a href="'+Object.values(e)[t]+'">'+Object.values(e)[t]+"</a></td>");break;case dataLength-1:$("table>tr:nth-child("+a+")").append('<td><input type="checkbox" name="check" class="checkbox"  id="c'+a+'" '+o+"></td>");break;default:$("table>tr:nth-child("+a+")").append("<td>"+Object.values(e)[t]+"</td>")}})),function(){var e,t=[];e=localStorage.getItem("checked"),null!=localStorage.getItem("checkedNum")&&(t=localStorage.getItem("checkedNum").split(",")).forEach((function(e,c){t[c]=Number(e)}));!function(e,t){$(".checkbox").on("change",(function(){this.checked?($(this).addClass("active"),t.push(Number($(this).attr("id").slice(1))),e++,localStorage.setItem("checked",e),t=t.sort((function(e,t){return e-t})),localStorage.setItem("checkedNum",t),$("#count").text(e)):($(this).removeClass("active"),t.splice(t.indexOf(Number($(this).attr("id").slice(1))),1),e--,localStorage.setItem("checked",e),t=t.sort((function(e,t){return e-t})),localStorage.setItem("checkedNum",t),$("#count").text(e))})),$(".all").on("change",(function(){if(this.checked){$('[type="checkbox"]').addClass("active"),t=[];for(let e=1;e<=$('[type="checkbox"].active').length;e++)t.push(e);$('[type="checkbox"]').prop("checked",!0),e=$(".checkbox").length,localStorage.setItem("checked",e),localStorage.setItem("checkedNum",t),$("#count").text(e)}else $('[type="checkbox"]').removeClass("active"),t=[],$('[type="checkbox"]').prop("checked",!1),e=0,localStorage.setItem("checked",e),localStorage.setItem("checkedNum",t),$("#count").text(e)}))}(e,t)}()}else alert("В данной базе не существует такой страны либо университетов в ней. Исправьте, пожалуйста, ошибку либо введите другую страну.")}}),localStorage.setItem("country",e))}$("#send").on("click",(function(){c($("#textarea").val().trim().toLowerCase())})),$("#clear").on("click",(function(){$("#textarea").val(""),$("#counter").remove(),$(".table").remove(),localStorage.setItem("country",""),localStorage.setItem("countryOld",""),localStorage.setItem("checked",""),t=localStorage.setItem("checkedNum","")})),countryOld=localStorage.setItem("countryOld",e)}));